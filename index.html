<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Color Picker Coolors Style</title>

<!-- League Spartan font -->
<link href="https://fonts.googleapis.com/css2?family=League+Spartan&display=swap" rel="stylesheet" />

<style>
  body {
    font-family: 'League Spartan', sans-serif;
    background: #fafafa;
    color: #333;
    padding: 30px;
    text-align: center;
  }
  h1 {
    font-weight: 700;
    margin-bottom: 40px;
  }
  #picker {
    margin: 0 auto;
    width: 320px;
    height: 320px;
  }
  #selectedColor {
    margin-top: 60px;
    font-size: 1.6rem;
    font-weight: 700;
  }
  #warning {
    margin-top: 15px;
    color: #b22222;
    font-weight: 700;
    font-size: 1.1rem;
    display: none;
  }
</style>

</head>
<body>

<h1>Choose your color</h1>

<div id="picker"></div>

<div id="selectedColor">Selected color: #FF5733</div>
<div id="warning">⚠️ Warning: This color is very light. Recommended only for shirts on dark backgrounds.</div>

<!-- iro.js library -->
<script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>

<script>
  const picker = new iro.ColorPicker('#picker', {
    width: 320,
    borderWidth: 1,
    borderColor: "#ddd",
    layout: [
      { 
        component: iro.ui.Wheel,
        options: {}
      },
      {
        component: iro.ui.Slider,
        options: {
          sliderType: 'value'
        }
      }
    ],
    color: "#FF5733"
  });

  const selectedColorText = document.getElementById('selectedColor');
  const warningText = document.getElementById('warning');

  function getLuminance(hex) {
    // Convierte hex a RGB
    const r = parseInt(hex.substr(1,2),16) / 255;
    const g = parseInt(hex.substr(3,2),16) / 255;
    const b = parseInt(hex.substr(5,2),16) / 255;
    // Calcula luminancia relativa (sRGB)
    const a = [r,g,b].map(v => {
      return v <= 0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
    });
    return 0.2126*a[0] + 0.7152*a[1] + 0.0722*a[2];
  }

  picker.on('color:change', function(color) {
    const hex = color.hexString.toUpperCase();
    selectedColorText.textContent = `Selected color: ${hex}`;

    // Mostrar advertencia si la luminancia es mayor a 0.8 (color claro)
    if(getLuminance(hex) > 0.8){
      warningText.style.display = 'block';
    } else {
      warningText.style.display = 'none';
    }
  });
</script>

</body>
</html>
