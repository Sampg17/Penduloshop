<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Color Picker — Dual T-Shirt Preview</title>

<link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;700&display=swap" rel="stylesheet" />

<style>
  :root{ --content-max: 760px; } /* un poco más ancho para dos camisetas cómodas */
  *{ box-sizing: border-box; }

  /* Página centrada */
  html, body { height: 100%; }
  body{
    font-family:'League Spartan',sans-serif;
    background:#fafafa; color:#333;
    margin:0; display:flex; align-items:flex-start; justify-content:center;
    padding:24px;
  }

  /* Contenedor principal centrado */
  .wrap{
    width:100%;
    max-width:var(--content-max);
    display:flex; flex-direction:column; align-items:center; /* centra todo */
    text-align:center;
  }

  h1{
    font-weight:700;
    margin:8px 0 24px;
    font-size:clamp(20px,3.5vw,34px);
  }

  /* Picker */
  #picker{ margin:0 auto; } /* ancho/alto por JS */

  #selectedColor{
    margin-top:20px; font-weight:700;
    font-size:clamp(16px,2.6vw,22px);
    word-break:break-word;
  }

  #copyRow{ margin-top:10px; }
  #copyBtn{
    font-family:'League Spartan',sans-serif;
    padding:10px 14px; border-radius:10px; border:2px solid #222;
    background:#fff; cursor:pointer; font-weight:700;
    transition:transform .06s ease, box-shadow .2s ease;
    box-shadow:0 2px 8px rgba(0,0,0,.06);
  }
  #copyBtn:active{ transform:translateY(1px); }
  #copyMsg{ margin-left:8px; font-weight:700; }

  /* Dos camisetas lado a lado, centradas */
  #previewWrap{
    margin-top:16px;
    display:flex; justify-content:center; align-items:center;
    gap:20px; flex-wrap:nowrap; /* siempre al lado */
    width:100%;
  }
  .tee{
    filter: drop-shadow(0 6px 14px rgba(0,0,0,.12));
    flex:0 0 auto; /* no crecer/encoger, tamaño lo pone JS */
  }

  #warning{
    margin:14px auto 0; color:#b22222; font-weight:700;
    font-size:clamp(13px,2.2vw,17px); max-width:56ch; display:none;
  }

  /* Un poco más de margen inferior seguro en móviles con barra */
  @supports(padding:max(0px)){ body{ padding-bottom:max(24px, env(safe-area-inset-bottom)); } }
</style>
</head>
<body>

<div class="wrap">
  <h1>Choose your color</h1>

  <div id="picker" role="application" aria-label="Color picker"></div>

  <div id="selectedColor">Selected color: #FF5733</div>

  <div id="copyRow">
    <button id="copyBtn" type="button" aria-live="polite">Copy HEX</button>
    <span id="copyMsg" aria-hidden="true"></span>
  </div>

  <!-- Dos camisetas centradas y alineadas en fila -->
  <div id="previewWrap" aria-label="T-shirt color preview">
    <!-- Camiseta blanca -->
    <svg class="tee" id="teeWhite" viewBox="0 0 200 180" role="img" aria-label="White T-shirt">
      <path
        d="M60 12 L90 26 L110 26 L140 12 L180 52 L153 70 L153 160 Q153 172 140 172 L60 172 Q47 172 47 160 L47 70 L20 52 Z"
        fill="#FFFFFF" stroke="#222" stroke-width="3" stroke-linejoin="round" />
      <path d="M85 28 Q100 40 115 28" fill="none" stroke="#222" stroke-width="3" stroke-linecap="round"/>
      <text id="letterWhite"
        x="100" y="110"
        text-anchor="middle"
        dominant-baseline="middle"
        font-family="League Spartan, system-ui, sans-serif"
        font-weight="700"
        font-size="64"
        fill="#FF5733">A</text>
    </svg>

    <!-- Camiseta negra -->
    <svg class="tee" id="teeBlack" viewBox="0 0 200 180" role="img" aria-label="Black T-shirt">
      <path
        d="M60 12 L90 26 L110 26 L140 12 L180 52 L153 70 L153 160 Q153 172 140 172 L60 172 Q47 172 47 160 L47 70 L20 52 Z"
        fill="#000000" stroke="#222" stroke-width="3" stroke-linejoin="round" />
      <path d="M85 28 Q100 40 115 28" fill="none" stroke="#222" stroke-width="3" stroke-linecap="round"/>
      <text id="letterBlack"
        x="100" y="110"
        text-anchor="middle"
        dominant-baseline="middle"
        font-family="League Spartan, system-ui, sans-serif"
        font-weight="700"
        font-size="64"
        fill="#FF5733">A</text>
    </svg>
  </div>

  <div id="warning">⚠️ This color is very light and may not be visible on white shirts. Consider using it on dark backgrounds.</div>
</div>

<!-- iro.js -->
<script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>
<script>
  const INITIAL_COLOR = "#FF5733";
  const GAP = 20; // gap entre camisetas (igual que en CSS)

  const picker = new iro.ColorPicker('#picker', {
    width: 320,
    borderWidth: 1,
    borderColor: "#ddd",
    layout: [
      { component: iro.ui.Wheel,  options: {} },
      { component: iro.ui.Slider, options: { sliderType: 'value' } }
    ],
    color: INITIAL_COLOR
  });

  const selectedColorText = document.getElementById('selectedColor');
  const warningText = document.getElementById('warning');
  const copyBtn = document.getElementById('copyBtn');
  const copyMsg = document.getElementById('copyMsg');
  const letterWhite = document.getElementById('letterWhite');
  const letterBlack = document.getElementById('letterBlack');

  function getLuminance(hex){
    const r = parseInt(hex.substr(1,2),16)/255;
    const g = parseInt(hex.substr(3,2),16)/255;
    const b = parseInt(hex.substr(5,2),16)/255;
    const a = [r,g,b].map(v=> v<=0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055,2.4));
    return 0.2126*a[0] + 0.7152*a[1] + 0.0722*a[2];
  }

  let lastHex = INITIAL_COLOR;
  function updateUI(hex){
    lastHex = hex;
    selectedColorText.textContent = `Selected color: ${hex}`;
    letterWhite.setAttribute('fill', hex);
    letterBlack.setAttribute('fill', hex);

    const lum = getLuminance(hex);
    warningText.style.display = lum > 0.8 ? 'block' : 'none';
  }

  // Centrado + dos camisetas lado a lado: calculamos tamaños para que quepan siempre dos.
  function sizeAll(){
    const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
    const maxContent = 760; // igual que --content-max
    const horizontalPadding = 48; // 24px a cada lado en <body>
    const containerWidth = Math.min(vw - horizontalPadding, maxContent);

    // Tamaño del wheel (arriba)
    const wheelWidth = Math.max(240, Math.min(420, Math.floor(containerWidth * 0.7)));
    picker.resize(wheelWidth);

    // Dos camisetas en fila: cada una ~ la mitad, restando el gap
    const teeWidth = Math.max(140, Math.floor((containerWidth - GAP) / 2));
    const teeHeight = Math.round(teeWidth * 0.75); // proporción agradable

    document.querySelectorAll('.tee').forEach(svg=>{
      svg.setAttribute('width', teeWidth);
      svg.setAttribute('height', teeHeight);
      // letra ~ 40% del ancho de la camiseta
      const text = svg.querySelector('text');
      if (text) text.setAttribute('font-size', Math.round(teeWidth * 0.4));
    });
  }

  let rAF;
  function onResize(){
    if (rAF) cancelAnimationFrame(rAF);
    rAF = requestAnimationFrame(sizeAll);
  }

  picker.on('color:change', (color)=>{
    const hex = color.hexString.toUpperCase();
    updateUI(hex);
  });

  copyBtn.addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(lastHex);
      copyMsg.textContent = 'Copied!';
      setTimeout(()=> copyMsg.textContent = '', 1500);
    }catch(e){
      alert('Could not copy. Please copy manually: ' + lastHex);
    }
  });

  window.addEventListener('resize', onResize);
  window.addEventListener('orientationchange', onResize);

  // init
  sizeAll();
  updateUI(INITIAL_COLOR);
</script>
</body>
</html>
